<div class="loader" id="appLoading">Loading...</div>
<div id="app">
  <div class="nav">
    <div class="left">
      <h1 class="title">Create an app</h1>
      <span class="ml8">Create a new application through the registry</span>
    </div>
    <div class="right">
      <vscode-text-field @input="updateKeyword(event)">
        <span
          slot="end"
          class="codicon codicon-search search"
          @click="search()"
        ></span>
      </vscode-text-field>
    </div>
  </div>
  <div class="app-panel" v-if="pageStatus === 'search'">
    <vscode-panels aria-label="Default">
      <template v-for="obj in templates">
        <vscode-panel-tab :id="obj.name" @click="handleTagChange(obj.key)">
          {{ obj.name }}
        </vscode-panel-tab>
        <vscode-panel-view :id="obj.name">
          <div class="app-area">
            <div class="app-items">
              <div v-if="applist.length === 0" class="bg_icon">
                <img
                  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAABPCAMAAAAXxfH1AAAAjVBMVEUAAAC/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7++vr6/v7+/v7+/v7++vr6/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7/9y992AAAALnRSTlMABWchDPbnfMo6X8LyN7Yoo47P+e5AulVsLQnXr1oVG+qcgTOndUndvpVPx4fRwGtpZgAABClJREFUaN7t2dmSojAAheGwBFBRlIDsiCDgNuf9H29w6UrLMgViMxcz3x1dsX6BxDRKGoS1kpG/QWZwyV9R4kwm50dz0cLeET0yrSue9JhMSlSsBNAVupLJtHY7Q4ErSwKpiR1104969t9KCwoi0nD+hf4us7eWk4U5qXMxCHtrXcxPjYllo7JY97I/ArB25BOEFZAUpK+IAqePhCUdgz7NVCAQXqZsHobpGxchAyyJ9OcByvdMVqJSLoevMSAY+EYTiR/GCrDdAsmuf9FRU1XNT4CV5uqfuBnhloDyLayCuYREwKZv103QGz3susJbhKRygNmzu8EggdQRPmJPKif86tcVAeirfsJfADShPbyBbld/tLDut0OWgLkUiNAHkVMAUXvYA/Tr1QL6fZLaAB2yK4fAoT1M5rgTSY0g8XnxMnoh9M7y8TzM2euyPBSNuWvqVmi33eLtkHAEaHItzMnN/X2PG1Y0w19nEItqXW40z7gW7nOF5moCXeoMh2gK4rFhDYtquE2hdoZNtNiNDdPHtr/FujOchcftq+NKHH2pFVxvEzvAqTXcaXR4Der48QZwJg57tAoEwFGYOEyKBJVVTKYOEynfnxxCusOC44rt3EgeEeY6wht028o/GDbRTY9/MDxbBWa7QIt+7FLf+UI7n5AfDXf7H/5wuIicL3N7wvCVgWP1fWmydXyYLmwfTe3Lr9CY8B4LMvdvzGrO/xthLz9cgsXBlcaGhTAdEPbWeNI30sgwFv3DIgWnOCPCxnWN8uT2DKeoaKlzFvcKKuL74Qg3Sb/w/Db0GYtVHUDxdljwIqbNjF5hiQIBH7pUAGXEI4xcu8dZJHSE9wDNCFcwQB0xudxz7bExbg/vKJDWhqKUP7SOfTnEUm4Ni0DymskYUHwm7GuosKgtfELjie4CqB864+tWwXE1awuvgJxw/L2MCnNryO33eNFctylw+FhYDTrCYfO6boDTx8KC3/0IE9bGLoD853cnB9B35DuPAbPusPehcJwA+/qXaabQHS4ARR4X5luEU/tpZE6a4eNzaV741BsXjkuAOi/dkLSETfsmWgBIZ/ZdsRsTJjYDsPduh/4yRGXdFgajjFHcUMoelGJMmEQUADturicND6EY+bVwu8OoMFma4FYr3FyMWpgpiVVDA3to2H39JkjOA9wx0yXkUQ6k2j02pDojfuceb1/3kULdH/apLfCf/Mz45V+aBfkEBwj8P1yO+jnnj+U0XqwAOemyrZd3JaAOK/ieZ9x5nvztWFoBSD2jlXTW8WBm9z+cNYDN/SFd6cKofkfZxePHiY4Ks/RWpY4vtxHPsRdj2Ozlcn78hmEX29AYo3eMmV51bFbHffBzpjp//QCyPXuy/edxL9lZwcMh46+fRJbgTiNTs3XcBAKZ2vJ+zmcyPSO0TIe84Tfmtw84DtxGwwAAAABJRU5ErkJggg=="
                />
                <p>No data</p>
              </div>
              <ul v-else>
                <li v-for="i in applist" class="app-card">
                  <div class="head">
                    <span class="title">{{ i.package }}</span>
                    <div style="display: inline-block">
                      <i class="codicon codicon-arrow-circle-down"></i
                      ><span style="margin-left: 2px">{{ i.download }}</span>
                    </div>
                  </div>
                  <div class="detail">{{ i.description }}</div>
                  <div class="app-buttons">
                    <vscode-button
                      @click="openUrl(i.package)"
                      appearance="secondary"
                      >See details</vscode-button
                    >
                    <vscode-button @click="switchStatus('init', i.package)"
                      >Create now</vscode-button
                    >
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </vscode-panel-view>
      </template>
    </vscode-panels>
  </div>
  <div class="init" v-else-if="pageStatus === 'init' ">
    <div class="config">
      <vscode-text-field
        class="config-item"
        @change="setConfigItem('dirName',event)"
        :value="configItems['dirName']"
      >
        <span class="red-star">*&nbsp;</span>App name (directory name)
      </vscode-text-field>
      <vscode-text-field
        class="config-item"
        :value="configItems.path"
        @click="setInitPath()"
      >
        <span class="red-star">*&nbsp;</span>Initialize the path
        <span slot="end" class="codicon codicon-file-submodule"></span>
      </vscode-text-field>
      <div class="config-item">
        <p style="margin: 0">
          <span class="red-star">*&nbsp;</span>Select the credential
        </p>
        <vscode-dropdown @change="setConfigItem('access',event)">
          <vscode-option v-for="i in $config.aliasList">{{ i }}</vscode-option>
        </vscode-dropdown>
      </div>
      <div v-for="(param, name) in currentAppParams">
        <vscode-text-field
          class="config-item"
          v-if="!param.enum"
          @change="setConfigItem(name, event)"
          :value="param.default"
        >
          <span class="red-star" v-if="isRequire(name)">*&nbsp;</span>{{
          param.title }}
        </vscode-text-field>
        <div class="config-item" v-else>
          <p style="margin: 0">
            <span class="red-star" v-if="isRequire(name)">*&nbsp;</span>{{
            param.title }}
          </p>
          <vscode-dropdown @change="setConfigItem(name, event)">
            <template v-for="item in param.enum">
              <vscode-option v-if="item === param.default" selected
                >{{ item }}</vscode-option
              >
              <vscode-option v-else>{{ item }}</vscode-option>
            </template>
          </vscode-dropdown>
        </div>
      </div>
    </div>
    <div class="init-buttons">
      <vscode-button @click="switchStatus('search')" appearance="secondary"
        >Previous</vscode-button
      >
      <vscode-button @click="initApplication()">Create</vscode-button>
    </div>
  </div>
</div>
